{
    "properties": {
            "displayName": "Tagging policy for vms",
            "description": "deny creating resources if tags are not present",
            "mode": "All"
        },

    "policyRule" : {
        "if":{
            "allof":[
                {
                    "field": "type",
                    "equals": "Microsoft.Compute/virtualMachines"
                },
                {
                    "value": "[indexOf(string(field('tags')), '\"\"')]",
                    "Equals": 0
                }
            ]
        },
        "then" : {
            "effect" : "deny"
        }
    }
}

